<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:beatTheBank="clr-namespace:BeatTheBank"
             x:DataType="beatTheBank:PlayerListViewModel"
             x:Class="BeatTheBank.PlayerListPage"
             x:Name="Page"
             Title="Players">
    
    <CollectionView ItemsSource="{Binding Players}">
        <CollectionView.EmptyView>
            <Button Text="New Player" 
                    Command="{Binding NavToNewPlayerCommand}" />    
        </CollectionView.EmptyView>
        
        <CollectionView.ItemTemplate>
            <DataTemplate x:DataType="beatTheBank:PlayerStats">
                <HorizontalStackLayout>
                    <VerticalStackLayout>
                        <VerticalStackLayout.GestureRecognizers>
                            <TapGestureRecognizer Command="{Binding Source={x:Reference Page}, Path=BindingContext.NavToNewGameCommand}" 
                                                  CommandParameter="{Binding .}" />
                        </VerticalStackLayout.GestureRecognizers>
                        <Label Text="{Binding PlayerName}" />
                        <Label Text="{Binding GameCount, StringFormat='Games: {0}'}" />
                        <Label Text="{Binding WinAmount, StringFormat='Amount Won: ${0}'}" />
                    </VerticalStackLayout>
                    <Button Text="Edit" 
                            Command="{Binding Source={x:Reference Page}, Path=BindingContext.NavToPlayerCommand}" 
                            CommandParameter="{Binding .}"/>
                    <!--jackpot wins/seen, amounts left behind, -->
                </HorizontalStackLayout>
            </DataTemplate>
        </CollectionView.ItemTemplate>
    </CollectionView>
</ContentPage>